# README.md

## Веб-приложение для менеджмента файлов на FTP

Это веб-приложение предоставляет API для управления файлами на FTP-сервере, а также для управления пользователями и администраторами. Оно включает функции регистрации пользователей, авторизации и администрирования.

### API HTTP

#### Пользователи (users)

- **Регистрация нового пользователя**
  - **Метод:** `GET`
  - **URL:** `/api/v1/users/{user_id}/registration/`
  - **Описание:** Регистрирует нового пользователя по указанному `user_id`.

- **Отправка временного кода авторизации**
  - **Метод:** `GET`
  - **URL:** `/api/v1/users/{user_id}/get_temp_code/`
  - **Описание:** Отправляет 6-значный код авторизации пользователю в Telegram.

- **Авторизация пользователя**
  - **Метод:** `GET`
  - **URL:** `/api/v1/users/{user_id}/{temp_code}/auth/`
  - **Описание:** Авторизует пользователя по 6-значному коду.

- **Выбор станции приема**
  - **Метод:** `GET`
  - **URL:** `/api/v1/users/select_station/`
  - **Описание:** Позволяет пользователю выбрать одну или несколько станций приема (разрешено выбирать от 1 до бесконечности).

#### Администратор (admin)

- **Активация пользователей**
  - **Метод:** `POST`
  - **URL:** `/api/v1/admin/activate_users/`
  - **Описание:** Принимает массив `[]` id пользователей и активирует их.

- **Деактивация пользователей**
  - **Метод:** `POST`
  - **URL:** `/api/v1/admin/deactivate_users/`
  - **Описание:** Принимает массив `[]` id пользователей и деактивирует их.

- **Список пользователей**
  - **Метод:** `GET`
  - **URL:** `/api/v1/admin/list_users/`
  - **Описание:** Получает список всех пользователей.

- **Добавление нового FTP-сервера**
  - **Метод:** `POST`
  - **URL:** `/api/v1/admin/add_new_ftp_server/`
  - **Описание:** Создает новую запись в таблице с данными сервера Scanex.
  - **Тело запроса:** 
    ```json
    {
      "login": "qwerty",
      "pwd": "qwerty",
      "url": "ftp://",
      "is_ssl": true
    }
    ```

#### Файлы (files)

- **Список файлов на станции**
  - **Метод:** `GET`
  - **URL:** `/api/v1/files/list_station_files/`
  - **Описание:** Получает список файлов на станции (например, Scanex).

- **Получение файлов пользователя**
  - **Метод:** `GET`
  - **URL:** `/api/v1/files/list_files/`
  - **Описание:** Получает файлы пользователя во всех статусах.

- **Пауза скачивания файла**
  - **Метод:** `POST`
  - **URL:** `/api/v1/files/{file_id}/pause/`
  - **Описание:** Ставит скачивание файла на паузу.

- **Возобновление скачивания файла**
  - **Метод:** `POST`
  - **URL:** `/api/v1/files/{file_id}/start/`
  - **Описание:** Возобновляет процесс скачивания файла.

- **Остановка скачивания и удаление файла**
  - **Метод:** `POST`
  - **URL:** `/api/v1/files/{file_id}/down/`
  - **Описание:** Останавливает скачивание и удаляет файл.

- **Удаление скачанного файла**
  - **Метод:** `POST`
  - **URL:** `/api/v1/files/{file_id}/remove/`
  - **Описание:** Удаляет файл, который был скачан.

- **Узнать время проведения опроса**
  - **Метод:** `GET`
  - **URL:** `/api/v1/files/survey/`
  - **Описание:** Узнает, когда проводился опрос и появились ли новые файлы на серверах Scanex.

### API WebSocket (WS)

#### Файлы (files)

- **Статус скачивания файлов пользователя**
  - **URL:** `WSS: /files/{user_id}/downloading/`
  - **Описание:** При переходе на страницу файлов отдает размерность и текущий статус из БД.

- **Статус скачивания конкретного файла**
  - **URL:** `WSS: /files/{file_id}/{user_id}/downloading/`
  - **Описание:** Предоставляет информацию о статусе скачивания конкретного файла для пользователя.

---
